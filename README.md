# Mongo Database

## Manage MongoDB

![mongoDB1.png](https://raw.github.com/foogeeks/AI-creativity/master/AI-creativity/content/mongoDB1.png)

We don’t need most of the usages. For adding or removing database accounts, we go to “Database Access”. In further development, for security reason, we might want to use “Network Access” to block other IPs from accessing the database.


## Connection
One easy way to connect and manage MongoDB is using MongoDB Compass. 

In “new connection”, type the connection URL here. (fill the username and password in above table)
URL: mongodb+srv://<username>:<password>@chatcreativity.0edw3nj.mongodb.net/test 

## Add Data

In the image above, we select “ADD DATA”-”Import File”-”Select a file”. Then we just select a .csv file. The file needs to follow a certain format. The first row will be the column name. Take the instruction database as an example, “_id” and “text” will be two columns, but “_id” will be generated by MongoDB, so in the csv file we just need text. Like below:

Note that we don’t need to add further instruction text like “now it is your turn” to the database. These sentences are duplicated and will be added by the server. Also the file needs to be .csv format rather than .xlsx(it is easy to transfer format)

## Export Data to File
Click the button and follow the steps. 

 The output file format has the same format we use to import data.


## Schema


# Firebase
Most of the function of the firebase is not used. We only use firebase for account authentication. Go to “Build”-”Authentication” and we will see the user emails and user UID. The UID here corresponds to the user UID in MongoDB.



# Render API
the file “update_env.py” contains four functions:
print_services: will print service name and its serviceId
get_env: will get all the environment variables for current service, return a map (key is env name, value is env value)
update_env: the function will call get_env to get the old env variables, the edit env variable part can be done inside the code as below:

It is basically editing the value of a key for a dictionary.
manual_deploy: this will deploy the service with the latest commit, the function should be called after updating environment variables.

For more API functions, please refer to https://api-docs.render.com/reference/introduction
Adding more functions is simple, just go to the right function, there is python code on the right. See below screenshot, the Update environment variables function. Basically we just need to fill in serviceId and Body params
